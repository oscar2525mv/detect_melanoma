window.preloadedContent = {
    "prompt-content": `# Prompt Original\n\n## Contexte\nAgis en tant qu'expert en Flutter et d√©veloppement mobile.\n\n## Objectif\nJe veux cr√©er un NOUVEAU projet Flutter en me basant sur le code du projet actuel de "Trash/Garbage Detection". La nouvelle application sera un **"Visualiseur Multi-Mod√®le de D√©tection de M√©lanome"**.\n\nTu dois prendre en charge la cr√©ation compl√®te du fichier en incluant toutes les logiques de configuration, permissions et injection de scripts.\n\n---\n\n## R√®gle Critique : Transformation des URLs\n\nLes "Hugging Face Spaces" ont une URL publique et une URL directe. Tu dois impl√©menter une fonction qui transforme automatiquement toute URL fournie par moi ou par l'utilisateur selon cette logique :\n\n- **Entr√©e (Originale) :** \`https://huggingface.co/spaces/UTILISATEUR/REPO\`\n- **Sortie (Directe) :** \`https://UTILISATEUR-REPO.hf.space\`\n- **Logique :** Remplace le slash \`/\` entre l'utilisateur et le nom du repo par un tiret \`-\`, et change le domaine en \`.hf.space\`.\n\n---\n\n## Fonctionnalit√©s Requises\n\n### 1. Menu de S√©lection de Mod√®les\nImpl√©mente une interface ergonomique pour basculer rapidement entre diff√©rents mod√®les.\n\n### 2. Liste Initiale de Mod√®les\nL'application doit d√©marrer avec cette liste pr√©charg√©e. Applique la r√®gle de transformation ci-dessus √† ces URL originales avant de les charger :\n\n- \`https://huggingface.co/spaces/sapnashettyy/melanoma-detector\`\n- \`https://huggingface.co/spaces/ish028792/melanoma\`\n- \`https://huggingface.co/spaces/dehannoor3199/melanoma-detection-system\`\n- \`https://huggingface.co/spaces/sapnashettyy/melanoma-detector2\`\n- \`https://huggingface.co/spaces/Nachosanchezz/Melanoma\`\n\n### 3. Ajout Dynamique de Mod√®le\nAjoute un moyen pour l'utilisateur d'ajouter une nouvelle URL originale Hugging Face. Le code doit d√©tecter le format et le transformer automatiquement.\n\n### 4. Blocage de Navigation\nModifie le \`NavigationDelegate\` pour autoriser uniquement la navigation au sein du domaine \`.hf.space\` du mod√®le actif et bloquer tout le reste pour que l'utilisateur ne sorte pas de l'outil.\n\n### 5. Am√©lioration Visuelle\nLe but est que l'application ressemble le plus possible √† une application native.\n- Impl√©mente une logique d'injection JavaScript/CSS.\n- **Mission :** Propose et int√®gre un code CSS intelligent pour masquer les √©l√©ments de l'interface web de Hugging Face qui ne sont pas n√©cessaires dans une app mobile (comme les headers, footers, ou barres de navigation web), afin d'offrir une exp√©rience utilisateur propre et immersive.\n\n### 6. Gestion des Permissions\nLe code doit inclure toute la logique n√©cessaire pour demander l'acc√®s √† la **Cam√©ra** et √† la **Galerie**, car ces mod√®les n√©cessitent l'upload d'images. R√©plique la logique robuste du projet base pour la compatibilit√© Android.\n\n---\n\n## Livrable\nG√©n√®re le code complet et fonctionnel dans un projet nouveau.`,

    "tasks-content": `# T√¢ches du Projet : Visualiseur Multi-Mod√®le de D√©tection de M√©lanome\n\n## R√©sum√©\nCr√©er une nouvelle application Flutter bas√©e sur le projet HF_WebView existant, avec un syst√®me multi-mod√®le pour la d√©tection de m√©lanome.\n\n---\n\n## Phase 1 : Planification ‚úÖ\n- [x] Analyser le projet source HF_WebView\n- [x] Comprendre la structure et les d√©pendances\n- [x] Cr√©er le plan d'impl√©mentation\n\n## Phase 2 : Cr√©ation du Nouveau Projet ‚úÖ\n- [x] Cr√©er le nouveau projet Flutter "detect_melenoma_1"\n- [x] Configurer le pubspec.yaml avec les d√©pendances\n- [x] Configurer l'AndroidManifest.xml avec les permissions\n\n## Phase 3 : Impl√©mentation du Code Principal ‚úÖ\n- [x] Cr√©er la fonction de transformation d'URL Hugging Face\n- [x] Cr√©er le mod√®le de donn√©es pour les mod√®les\n- [x] Impl√©menter le menu de s√©lection de mod√®les (Drawer)\n- [x] Impl√©menter l'ajout dynamique de mod√®les\n- [x] Configurer le WebViewController avec blocage de navigation\n- [x] Impl√©menter l'injection CSS/JS pour masquer les √©l√©ments HF\n- [x] Impl√©menter la gestion des permissions (Cam√©ra + Galerie)\n\n## Phase 4 : V√©rification ‚úÖ\n- [x] Analyser le code pour erreurs (\`flutter analyze\`)\n- [x] V√©rifier les d√©pendances (\`flutter pub get\`)\n- [x] Documenter le projet\n\n## Phase 5 : Pr√©sentation Interactive (Nouveau)\n- [x] Cr√©er le dossier \`pipeline_presentation\`\n- [x] Cr√©er \`index.html\` (Structure & Layout)\n- [x] Cr√©er \`style.css\` (Design Canva & Animations)\n- [x] Cr√©er \`script.js\` (Logique Markdown & Navigation)\n- [x] Int√©grer les placeholders et la navigation\n\n---\n\n## Statut Final : ‚úÖ TERMIN√â`,

    "plan-content": `# Plan d'Impl√©mentation : Visualiseur Multi-Mod√®le de D√©tection de M√©lanome\n\nApplication Flutter permettant de basculer entre diff√©rents mod√®les de d√©tection de m√©lanome h√©berg√©s sur Hugging Face Spaces.\n\n## Aper√ßu\n\nL'application transformera automatiquement les URLs Hugging Face en URLs directes \`.hf.space\`, permettra √† l'utilisateur de s√©lectionner parmi plusieurs mod√®les pr√©-configur√©s, d'en ajouter dynamiquement, et offrira une exp√©rience native en masquant les √©l√©ments d'interface Hugging Face.\n\n---\n\n## R√®gle de Transformation d'URL\n\n\`\`\`\nEntr√©e  : https://huggingface.co/spaces/UTILISATEUR/REPO\nSortie  : https://UTILISATEUR-REPO.hf.space\n\`\`\`\n\n**Exemple :**\n- \`https://huggingface.co/spaces/sapnashettyy/melanoma-detector\`\n- ‚Üí \`https://sapnashettyy-melanoma-detector.hf.space\`\n\n---\n\n## Mod√®les Initiaux\n\n| Nom du Mod√®le | URL Originale | URL Transform√©e |\n|---------------|---------------|-----------------|\n| Melanoma Detector (sapnashettyy) | \`https://huggingface.co/spaces/sapnashettyy/melanoma-detector\` | \`https://sapnashettyy-melanoma-detector.hf.space\` |\n| Melanoma (ish028792) | \`https://huggingface.co/spaces/ish028792/melanoma\` | \`https://ish028792-melanoma.hf.space\` |\n| Melanoma Detection System | \`https://huggingface.co/spaces/dehannoor3199/melanoma-detection-system\` | \`https://dehannoor3199-melanoma-detection-system.hf.space\` |\n| Melanoma Detector 2 | \`https://huggingface.co/spaces/sapnashettyy/melanoma-detector2\` | \`https://sapnashettyy-melanoma-detector2.hf.space\` |\n| Melanoma (Nachosanchezz) | \`https://huggingface.co/spaces/Nachosanchezz/Melanoma\` | \`https://Nachosanchezz-Melanoma.hf.space\` |\n\n---\n\n## Structure du Projet\n\n\`\`\`\ndetect_melenoma_1/\n‚îú‚îÄ‚îÄ lib/\n‚îÇ   ‚îî‚îÄ‚îÄ main.dart                 # Code principal de l'application\n‚îú‚îÄ‚îÄ android/\n‚îÇ   ‚îî‚îÄ‚îÄ app/\n‚îÇ       ‚îî‚îÄ‚îÄ src/\n‚îÇ           ‚îî‚îÄ‚îÄ main/\n‚îÇ               ‚îú‚îÄ‚îÄ AndroidManifest.xml    # Permissions Android\n‚îÇ               ‚îî‚îÄ‚îÄ res/\n‚îÇ                   ‚îî‚îÄ‚îÄ xml/\n‚îÇ                       ‚îî‚îÄ‚îÄ file_paths.xml # FileProvider config\n‚îú‚îÄ‚îÄ pubspec.yaml                  # D√©pendances Flutter\n‚îî‚îÄ‚îÄ docs/                         # Documentation\n\`\`\`\n\n---\n\n## Fichiers √† Cr√©er\n\n### 1. pubspec.yaml\n\nConfiguration du projet avec les d√©pendances :\n- \`webview_flutter\` et \`webview_flutter_android\` pour le WebView\n- \`permission_handler\` pour les permissions cam√©ra/galerie\n- \`image_picker\` pour la s√©lection d'images\n- \`shared_preferences\` pour la persistance des mod√®les ajout√©s\n\n### 2. lib/main.dart\n\nFichier principal contenant :\n\n1. **Classe \`MelanomaModel\`** - Mod√®le de donn√©es avec :\n   - \`name\` : Nom affich√©\n   - \`originalUrl\` : URL Hugging Face originale\n   - \`directUrl\` : URL transform√©e (calcul√©e automatiquement)\n\n2. **Fonction \`transformHuggingFaceUrl()\`** - Transformation automatique :\n   \`\`\`dart\n   // Entr√©e : https://huggingface.co/spaces/USER/REPO\n   // Sortie : https://USER-REPO.hf.space\n   \`\`\`\n\n3. **Interface de s√©lection de mod√®les** - Drawer lat√©ral ergonomique avec :\n   - Liste des mod√®les disponibles\n   - Indicateur du mod√®le actif\n   - Bouton d'ajout de nouveau mod√®le\n\n4. **Bo√Æte de dialogue d'ajout dynamique** - Permet √† l'utilisateur d'entrer une URL originale\n\n5. **NavigationDelegate restrictif** - Bloque toute navigation hors du domaine \`.hf.space\` actif\n\n6. **Injection CSS/JS avanc√©e** - Masque :\n   - Headers et footers Hugging Face\n   - Boutons "Show API"\n   - Banni√®res de chargement\n   - Navigation Gradio\n\n### 3. AndroidManifest.xml\n\nPermissions Android requises :\n- \`INTERNET\`\n- \`CAMERA\`\n- \`READ_EXTERNAL_STORAGE\` (Android < 13)\n- \`READ_MEDIA_IMAGES\` (Android 13+)\n\n### 4. file_paths.xml\n\nConfiguration FileProvider pour compatibilit√© image_picker.\n\n---\n\n## Plan de V√©rification\n\n### Tests Automatis√©s\n- Analyse statique avec \`flutter analyze\`\n- Compilation avec \`flutter build apk --debug\`\n\n### V√©rification Manuelle\n- Test de la fonction de transformation d'URL\n- Test du changement de mod√®le\n- Test de l'ajout dynamique de mod√®le\n- Test du blocage de navigation`,

    "walkthrough-content": `# Walkthrough : Visualiseur Multi-Mod√®le de D√©tection de M√©lanome\n\n## ‚úÖ R√©sum√© du Travail Accompli\n\nApplication Flutter compl√®te permettant de visualiser et basculer entre plusieurs mod√®les de d√©tection de m√©lanome h√©berg√©s sur Hugging Face Spaces.\n\n---\n\n## üìÅ Fichiers Cr√©√©s\n\n| Fichier | Description |\n|---------|-------------|\n| \`pubspec.yaml\` | Configuration avec d√©pendances WebView, permissions, image_picker |\n| \`lib/main.dart\` | Code principal avec toute la logique de l'application |\n| \`android/app/src/main/AndroidManifest.xml\` | Permissions Android (Cam√©ra, Galerie, Internet) |\n| \`android/app/build.gradle.kts\` | Configuration Gradle avec r√©solution de conflit activity |\n| \`android/app/src/main/res/xml/file_paths.xml\` | Configuration FileProvider pour image_picker |\n\n---\n\n## üîß Fonctionnalit√©s Impl√©ment√©es\n\n### 1. Transformation d'URL Hugging Face\n\n\`\`\`dart\n/// Transforme une URL Hugging Face originale en URL directe .hf.space\n/// Entr√©e : https://huggingface.co/spaces/UTILISATEUR/REPO\n/// Sortie : https://UTILISATEUR-REPO.hf.space\nstatic String transformHuggingFaceUrl(String originalUrl) {\n  // Si c'est d√©j√† une URL directe, la retourner telle quelle\n  if (originalUrl.contains('.hf.space')) {\n    return originalUrl;\n  }\n\n  // Pattern: https://huggingface.co/spaces/USER/REPO\n  final regex = RegExp(r'https?://huggingface\.co/spaces/([^/]+)/([^/\s]+)');\n  final match = regex.firstMatch(originalUrl);\n\n  if (match != null) {\n    final user = match.group(1)!;\n    final repo = match.group(2)!;\n    return 'https://$user-$repo.hf.space';\n  }\n\n  // Si le format n'est pas reconnu, retourner l'URL originale\n  return originalUrl;\n}\n\`\`\`\n\n### 2. Liste des Mod√®les Pr√©-charg√©s\n\n| Mod√®le | URL Transform√©e |\n|--------|-----------------|\n| Melanoma Detector (sapnashettyy) | \`sapnashettyy-melanoma-detector.hf.space\` |\n| Melanoma (ish028792) | \`ish028792-melanoma.hf.space\` |\n| Melanoma Detection System | \`dehannoor3199-melanoma-detection-system.hf.space\` |\n| Melanoma Detector 2 | \`sapnashettyy-melanoma-detector2.hf.space\` |\n| Melanoma (Nachosanchezz) | \`Nachosanchezz-Melanoma.hf.space\` |\n\n### 3. Menu de S√©lection de Mod√®les\n\n- Drawer lat√©ral avec liste des mod√®les\n- Indicateur du mod√®le actif (ic√¥ne check)\n- Bouton d'ajout dynamique de mod√®le\n- Design Material 3 avec th√®me sombre violet\n\n### 4. Ajout Dynamique de Mod√®les\n\n- Dialogue pour entrer une URL Hugging Face originale\n- Transformation automatique en URL directe\n- Persistance automatique via SharedPreferences\n- Validation du format d'URL\n\n### 5. Blocage de Navigation (Mode Kiosque)\n\n\`\`\`dart\nonNavigationRequest: (NavigationRequest request) {\n  final currentDomain = _extractDomain(_currentModel.directUrl);\n  if (request.url.contains(currentDomain) || \n      request.url.startsWith(_currentModel.directUrl)) {\n    return NavigationDecision.navigate;\n  }\n  debugPrint('Navigation bloqu√©e vers: \\${request.url}');\n  return NavigationDecision.prevent;\n}\n\`\`\`\n\n### 6. Injection CSS/JS pour Apparence Native\n\nLe code injecte un CSS qui masque automatiquement :\n- ‚úÖ Headers et footers Hugging Face\n- ‚úÖ Boutons "Show API" et "Built with Gradio"\n- ‚úÖ Liens de branding Gradio\n- ‚úÖ √âl√©ments de navigation Gradio\n- ‚úÖ Am√©lioration du style de scrollbar\n\n### 7. Gestion des Permissions Android\n\n\`\`\`dart\nFuture<void> _requestPermissions() async {\n  await Permission.camera.request();\n  if (Platform.isAndroid) {\n    // Android 13+ utilise READ_MEDIA_IMAGES\n    if (await Permission.photos.status.isDenied) {\n      await Permission.photos.request();\n    }\n    // Android < 13 utilise READ_EXTERNAL_STORAGE\n    if (await Permission.storage.status.isDenied) {\n      await Permission.storage.request();\n    }\n  }\n}\n\`\`\`\n\n---\n\n## üß™ V√©rification\n\n### Analyse Statique\n\`\`\`bash\n$ flutter analyze\nAnalyzing detect_melenoma_1...\nNo issues found! (ran in 2.5s)\n\`\`\`\n\n### D√©pendances\n\`\`\`bash\n$ flutter pub get\nResolving dependencies...\nGot dependencies!\n\`\`\`\n\n---\n\n## üöÄ Comment Lancer l'Application\n\n\`\`\`bash\n# Se placer dans le r√©pertoire du projet\ncd detect_melenoma_1\n\n# T√©l√©charger les d√©pendances\nflutter pub get\n\n# Lancer sur Android (√©mulateur ou appareil connect√©)\nflutter run\n\n# Ou construire l'APK\nflutter build apk\n\`\`\`\n\n---\n\n## üì± Interface Utilisateur\n\nL'application utilise **Material Design 3** avec un th√®me sombre violet. Elle comprend :\n\n1. **AppBar** - Affiche le nom du mod√®le actif + boutons Refresh/Aide\n2. **Drawer** - Menu lat√©ral pour s√©lection de mod√®les et ajout\n3. **WebView** - Affichage du mod√®le Hugging Face\n4. **FAB** - Navigation avant/arri√®re\n\n---\n\n## ‚ö†Ô∏è Avertissement\n\n> Cette application est √† but **√©ducatif uniquement**. Les r√©sultats ne remplacent **pas** un diagnostic m√©dical professionnel. Consultez toujours un dermatologue.\n`
};
